(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ 4:
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ "CFaH":
/*!*******************************!*\
  !*** ./client/common/http.js ***!
  \*******************************/
/*! exports provided: Http */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Http", function() { return Http; });
/* harmony import */ var request__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! request */ "MNzl");
/* harmony import */ var request__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(request__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_redux_redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config/redux/redux.store */ "p6Ez");


class Http {
  constructor() {}

  get(url, auth = true, options = null, fullyQualified = false, overrideStatusCodeFailure = false) {
    return new Promise((resolve, reject) => {
      try {
        if (!options) {
          options = {
            method: 'GET',
            url: fullyQualified ? url : `${window.location.protocol}//${window.location.host}${url}`,
            headers: {
              'Content-Type': 'application/json'
            }
          };
        }

        if (auth) {
          const {
            token
          } = _config_redux_redux_store__WEBPACK_IMPORTED_MODULE_1__["store"].getState().appReducer;
          options.headers['Authorization'] = `Bearer ${token}`;
        }

        request__WEBPACK_IMPORTED_MODULE_0___default()(options, (error, response, body) => {
          if (error) {
            return reject(error);
          }

          if (!overrideStatusCodeFailure && !(response.statusCode >= 200 && response.statusCode <= 299)) {
            reject(`Status Code: ${response.statusCode}`);
          }

          resolve(JSON.parse(response.body));
        });
      } catch (e) {
        reject(e);
      }
    });
  }

  post(url, body, auth = true, fullyQualified = false, options = null, overrideStatusCodeFailure = false) {
    return new Promise((resolve, reject) => {
      try {
        if (!options) {
          options = {
            method: 'POST',
            url: fullyQualified ? url : `${window.location.protocol}//${window.location.host}${url}`,
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(body)
          };
        }

        if (auth) {
          const {
            token
          } = _config_redux_redux_store__WEBPACK_IMPORTED_MODULE_1__["store"].getState().appReducer;
          options.headers['Authorization'] = `Bearer ${token}`;
        }

        request__WEBPACK_IMPORTED_MODULE_0___default()(options, (error, response, body) => {
          if (error) {
            return reject(error);
          }

          if (!overrideStatusCodeFailure && !(response.statusCode >= 200 && response.statusCode <= 299)) {
            reject(`Status Code: ${response.statusCode}`);
          }

          resolve(JSON.parse(response.body));
        });
      } catch (e) {
        reject(e);
      }
    });
  }

  put(url, body, auth = true, fullyQualified = false, options = null, overrideStatusCodeFailure = false) {
    return new Promise((resolve, reject) => {
      try {
        if (!options) {
          options = {
            method: 'PUT',
            url: fullyQualified ? url : `${window.location.protocol}//${window.location.host}${url}`,
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(body)
          };
        }

        if (auth) {
          const {
            token
          } = _config_redux_redux_store__WEBPACK_IMPORTED_MODULE_1__["store"].getState().appReducer;
          options.headers['Authorization'] = `Bearer ${token}`;
        }

        request__WEBPACK_IMPORTED_MODULE_0___default()(options, (error, response, body) => {
          if (error) {
            return reject(error);
          }

          if (!overrideStatusCodeFailure && !(response.statusCode >= 200 && response.statusCode <= 299)) {
            reject(`Status Code: ${response.statusCode}`);
          }

          resolve(JSON.parse(response.body));
        });
      } catch (e) {
        reject(e);
      }
    });
  }

}

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY3J5cHRvIChpZ25vcmVkKT9hNzUwIiwid2VicGFjazovLy8uL2NsaWVudC9jb21tb24vaHR0cC5qcyJdLCJuYW1lcyI6WyJIdHRwIiwiY29uc3RydWN0b3IiLCJnZXQiLCJ1cmwiLCJhdXRoIiwib3B0aW9ucyIsImZ1bGx5UXVhbGlmaWVkIiwib3ZlcnJpZGVTdGF0dXNDb2RlRmFpbHVyZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwibWV0aG9kIiwid2luZG93IiwibG9jYXRpb24iLCJwcm90b2NvbCIsImhvc3QiLCJoZWFkZXJzIiwidG9rZW4iLCJzdG9yZSIsImdldFN0YXRlIiwiYXBwUmVkdWNlciIsInJlcXVlc3QiLCJlcnJvciIsInJlc3BvbnNlIiwiYm9keSIsInN0YXR1c0NvZGUiLCJKU09OIiwicGFyc2UiLCJlIiwicG9zdCIsInN0cmluZ2lmeSIsInB1dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsZTs7Ozs7Ozs7Ozs7O0FDQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFTyxNQUFNQSxJQUFOLENBQVc7QUFFZEMsYUFBVyxHQUFHLENBRWI7O0FBRURDLEtBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxJQUFJLEdBQUcsSUFBYixFQUFtQkMsT0FBTyxHQUFHLElBQTdCLEVBQW1DQyxjQUFjLEdBQUcsS0FBcEQsRUFBMkRDLHlCQUF5QixHQUFHLEtBQXZGLEVBQThGO0FBQzdGLFdBQU8sSUFBSUMsT0FBSixDQUFZLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtBQUNwQyxVQUFJO0FBQ0EsWUFBSSxDQUFDTCxPQUFMLEVBQWM7QUFDVkEsaUJBQU8sR0FBRztBQUNOTSxrQkFBTSxFQUFFLEtBREY7QUFFTlIsZUFBRyxFQUFFRyxjQUFjLEdBQUdILEdBQUgsR0FBVSxHQUFFUyxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLFFBQVMsS0FBSUYsTUFBTSxDQUFDQyxRQUFQLENBQWdCRSxJQUFLLEdBQUVa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VyxFQUFyQyxDQUFOO0FBQ0g7O0FBRURoQixpQkFBTyxDQUFDaUIsSUFBSSxDQUFDQyxLQUFMLENBQVdKLFFBQVEsQ0FBQ0MsSUFBcEIsQ0FBRCxDQUFQO0FBQ0gsU0FWTSxDQUFQO0FBV0gsT0EzQkQsQ0EyQkUsT0FBT0ksQ0FBUCxFQUFVO0FBQ1JsQixjQUFNLENBQUNrQixDQUFELENBQU47QUFDSDtBQUNKLEtBL0JNLENBQVA7QUFnQ0g7O0FBNUdhLEMiLCJmaWxlIjoiYnVpbGQvMS5lMjk5MzhhZGVmMWYwNjQ4Yjg1Yi5jaHVuay5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIChpZ25vcmVkKSAqLyIsImltcG9ydCByZXF1ZXN0IGZyb20gJ3JlcXVlc3QnO1xyXG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4vY29uZmlnL3JlZHV4L3JlZHV4LnN0b3JlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIdHRwIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0KHVybCwgYXV0aCA9IHRydWUsIG9wdGlvbnMgPSBudWxsLCBmdWxseVF1YWxpZmllZCA9IGZhbHNlLCBvdmVycmlkZVN0YXR1c0NvZGVGYWlsdXJlID0gZmFsc2UpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBmdWxseVF1YWxpZmllZCA/IHVybCA6IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0vLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9JHt1cmx9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYXV0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IHN0b3JlLmdldFN0YXRlKCkuYXBwUmVkdWNlcjtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdChvcHRpb25zLCAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvdmVycmlkZVN0YXR1c0NvZGVGYWlsdXJlICYmICEocmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzQ29kZSA8PSAyOTkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChgU3RhdHVzIENvZGU6ICR7cmVzcG9uc2Uuc3RhdHVzQ29kZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZShyZXNwb25zZS5ib2R5KSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdCh1cmwsIGJvZHksIGF1dGggPSB0cnVlLCBmdWxseVF1YWxpZmllZCA9IGZhbHNlLCBvcHRpb25zID0gbnVsbCwgb3ZlcnJpZGVTdGF0dXNDb2RlRmFpbHVyZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGZ1bGx5UXVhbGlmaWVkID8gdXJsIDogYCR7d2luZG93LmxvY2F0aW9uLnByb3RvY29sfS8vJHt3aW5kb3cubG9jYXRpb24uaG9zdH0ke3VybH1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYXV0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IHN0b3JlLmdldFN0YXRlKCkuYXBwUmVkdWNlcjtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdChvcHRpb25zLCAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvdmVycmlkZVN0YXR1c0NvZGVGYWlsdXJlICYmICEocmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzQ29kZSA8PSAyOTkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChgU3RhdHVzIENvZGU6ICR7cmVzcG9uc2Uuc3RhdHVzQ29kZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZShyZXNwb25zZS5ib2R5KSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHV0KHVybCwgYm9keSwgYXV0aCA9IHRydWUsIGZ1bGx5UXVhbGlmaWVkID0gZmFsc2UsIG9wdGlvbnMgPSBudWxsLCBvdmVycmlkZVN0YXR1c0NvZGVGYWlsdXJlID0gZmFsc2UpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBmdWxseVF1YWxpZmllZCA/IHVybCA6IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0vLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9JHt1cmx9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGF1dGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHRva2VuIH0gPSBzdG9yZS5nZXRTdGF0ZSgpLmFwcFJlZHVjZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dG9rZW59YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qob3B0aW9ucywgKGVycm9yLCByZXNwb25zZSwgYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3ZlcnJpZGVTdGF0dXNDb2RlRmFpbHVyZSAmJiAhKHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPD0gMjk5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoYFN0YXR1cyBDb2RlOiAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UocmVzcG9uc2UuYm9keSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==