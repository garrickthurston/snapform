(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[2],{

/***/ 4:
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ "dkJd":
/*!*********************************************!*\
  !*** ./client/app/src/shared/utils/http.js ***!
  \*********************************************/
/*! exports provided: Http */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Http", function() { return Http; });
/* harmony import */ var request__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! request */ "MNzl");
/* harmony import */ var request__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(request__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_redux_redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/redux/redux.store */ "MBHU");


class Http {
  constructor() {}

  get(url, auth = true, options = null, fullyQualified = false, overrideStatusCodeFailure = false) {
    return new Promise((resolve, reject) => {
      try {
        if (!options) {
          options = {
            method: 'GET',
            url: fullyQualified ? url : `${window.location.protocol}//${window.location.host}${url}`,
            cache: false,
            headers: {
              'Content-Type': 'application/json'
            }
          };
        }

        if (auth) {
          const {
            token
          } = _config_redux_redux_store__WEBPACK_IMPORTED_MODULE_1__["store"].getState();
          options.headers['Authorization'] = `Bearer ${token}`;
        }

        request__WEBPACK_IMPORTED_MODULE_0___default()(options, (error, response, body) => {
          if (error) {
            return reject(error);
          }

          if (!overrideStatusCodeFailure && !(response.statusCode >= 200 && response.statusCode <= 299)) {
            reject(`Status Code: ${response.statusCode}`);
          }

          resolve(JSON.parse(response.body));
        });
      } catch (e) {
        reject(e);
      }
    });
  }

  post(url, body, auth = true, fullyQualified = false, options = null, overrideStatusCodeFailure = false) {
    return new Promise((resolve, reject) => {
      try {
        if (!options) {
          options = {
            method: 'POST',
            url: fullyQualified ? url : `${window.location.protocol}//${window.location.host}${url}`,
            cache: false,
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(body)
          };
        }

        if (auth) {
          const {
            token
          } = _config_redux_redux_store__WEBPACK_IMPORTED_MODULE_1__["store"].getState();
          options.headers['Authorization'] = `Bearer ${token}`;
        }

        request__WEBPACK_IMPORTED_MODULE_0___default()(options, (error, response, body) => {
          if (error) {
            return reject(error);
          }

          if (!overrideStatusCodeFailure && !(response.statusCode >= 200 && response.statusCode <= 299)) {
            reject(`Status Code: ${response.statusCode}`);
          }

          resolve(JSON.parse(response.body));
        });
      } catch (e) {
        reject(e);
      }
    });
  }

  put(url, body, auth = true, fullyQualified = false, options = null, overrideStatusCodeFailure = false) {
    return new Promise((resolve, reject) => {
      try {
        if (!options) {
          options = {
            method: 'PUT',
            url: fullyQualified ? url : `${window.location.protocol}//${window.location.host}${url}`,
            cache: false,
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(body)
          };
        }

        if (auth) {
          const {
            token
          } = _config_redux_redux_store__WEBPACK_IMPORTED_MODULE_1__["store"].getState();
          options.headers['Authorization'] = `Bearer ${token}`;
        }

        request__WEBPACK_IMPORTED_MODULE_0___default()(options, (error, response, body) => {
          if (error) {
            return reject(error);
          }

          if (!overrideStatusCodeFailure && !(response.statusCode >= 200 && response.statusCode <= 299)) {
            reject(`Status Code: ${response.statusCode}`);
          }

          resolve(JSON.parse(response.body));
        });
      } catch (e) {
        reject(e);
      }
    });
  }

}

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY3J5cHRvIChpZ25vcmVkKT9hNzUwIiwid2VicGFjazovLy8uL2NsaWVudC9hcHAvc3JjL3NoYXJlZC91dGlscy9odHRwLmpzIl0sIm5hbWVzIjpbIkh0dHAiLCJjb25zdHJ1Y3RvciIsImdldCIsInVybCIsImF1dGgiLCJvcHRpb25zIiwiZnVsbHlRdWFsaWZpZWQiLCJvdmVycmlkZVN0YXR1c0NvZGVGYWlsdXJlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJtZXRob2QiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdCIsImNhY2hlIiwiaGVhZGVycyIsInRva2VuIiwic3RvcmUiLCJnZXRTdGF0ZSIsInJlcXVlc3QiLCJlcnJvciIsInJlc3BvbnNlIiwiYm9keSIsInN0YXR1c0NvZGUiLCJKU09OIiwicGFyc2UiLCJlIiwicG9zdCIsInN0cmluZ2lmeSIsInB1dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsZTs7Ozs7Ozs7Ozs7O0FDQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFTyxNQUFNQSxJQUFOLENBQVc7QUFFZEMsYUFBVyxHQUFHLENBRWI7O0FBRURDLEtBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxJQUFJLEdBQUcsSUFBYixFQUFtQkMsT0FBTyxHQUFHLElBQTdCLEVBQW1DQyxjQUFjLEdBQUcsS0FBcEQsRUFBMkRDLHlCQUF5QixHQUFHLEtBQXZGLEVBQThGO0FBQzdGLFdBQU8sSUFBSUMsT0FBSixDQUFZLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtBQUNwQyxVQUFJO0FBQ0EsWUFBSSxDQUFDTCxPQUFMLEVBQWM7QUFDVkEsaUJBQU8sR0FBRztBQUNOTSxrQkFBTSxFQUFFLEtBREY7QUFFTlIsZUFBRyxFQUFFRyxjQUFjLEdBQUdILEdBQUgsR0FBVSxHQUFFUyxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLFFBQVMsS0FBSUYsTUFBTSxDQUFDQyxRQUFQLENBQWdCRSxJ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dkQsQ0FBbEMsRUFBK0Y7QUFDM0ZmLGtCQUFNLENBQUUsZ0JBQWVhLFFBQVEsQ0FBQ0UsVUFBVyxFQUFyQyxDQUFOO0FBQ0g7O0FBRURoQixpQkFBTyxDQUFDaUIsSUFBSSxDQUFDQyxLQUFMLENBQVdKLFFBQVEsQ0FBQ0MsSUFBcEIsQ0FBRCxDQUFQO0FBQ0gsU0FWTSxDQUFQO0FBV0gsT0E1QkQsQ0E0QkUsT0FBT0ksQ0FBUCxFQUFVO0FBQ1JsQixjQUFNLENBQUNrQixDQUFELENBQU47QUFDSDtBQUNKLEtBaENNLENBQVA7QUFpQ0g7O0FBL0dhLEMiLCJmaWxlIjoiYnVpbGQvMi4xMjdhYTlkY2ZmZWQxYjkwY2VmZi5jaHVuay5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIChpZ25vcmVkKSAqLyIsImltcG9ydCByZXF1ZXN0IGZyb20gJ3JlcXVlc3QnO1xyXG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4uLy4uL2NvbmZpZy9yZWR1eC9yZWR1eC5zdG9yZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgSHR0cCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCh1cmwsIGF1dGggPSB0cnVlLCBvcHRpb25zID0gbnVsbCwgZnVsbHlRdWFsaWZpZWQgPSBmYWxzZSwgb3ZlcnJpZGVTdGF0dXNDb2RlRmFpbHVyZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZnVsbHlRdWFsaWZpZWQgPyB1cmwgOiBgJHt3aW5kb3cubG9jYXRpb24ucHJvdG9jb2x9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fSR7dXJsfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYXV0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IHN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dG9rZW59YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qob3B0aW9ucywgKGVycm9yLCByZXNwb25zZSwgYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3ZlcnJpZGVTdGF0dXNDb2RlRmFpbHVyZSAmJiAhKHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPD0gMjk5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoYFN0YXR1cyBDb2RlOiAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UocmVzcG9uc2UuYm9keSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc3QodXJsLCBib2R5LCBhdXRoID0gdHJ1ZSwgZnVsbHlRdWFsaWZpZWQgPSBmYWxzZSwgb3B0aW9ucyA9IG51bGwsIG92ZXJyaWRlU3RhdHVzQ29kZUZhaWx1cmUgPSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBmdWxseVF1YWxpZmllZCA/IHVybCA6IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0vLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9JHt1cmx9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYXV0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IHN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dG9rZW59YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qob3B0aW9ucywgKGVycm9yLCByZXNwb25zZSwgYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3ZlcnJpZGVTdGF0dXNDb2RlRmFpbHVyZSAmJiAhKHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPD0gMjk5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoYFN0YXR1cyBDb2RlOiAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UocmVzcG9uc2UuYm9keSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1dCh1cmwsIGJvZHksIGF1dGggPSB0cnVlLCBmdWxseVF1YWxpZmllZCA9IGZhbHNlLCBvcHRpb25zID0gbnVsbCwgb3ZlcnJpZGVTdGF0dXNDb2RlRmFpbHVyZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZnVsbHlRdWFsaWZpZWQgPyB1cmwgOiBgJHt3aW5kb3cubG9jYXRpb24ucHJvdG9jb2x9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fSR7dXJsfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGF1dGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHRva2VuIH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3Rva2VufWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0KG9wdGlvbnMsIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW92ZXJyaWRlU3RhdHVzQ29kZUZhaWx1cmUgJiYgIShyZXNwb25zZS5zdGF0dXNDb2RlID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXNDb2RlIDw9IDI5OSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGBTdGF0dXMgQ29kZTogJHtyZXNwb25zZS5zdGF0dXNDb2RlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=